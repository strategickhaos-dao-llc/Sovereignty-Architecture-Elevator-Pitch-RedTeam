psycheville:
  version: "1.0.0"
  description: "Self-Observing Infrastructure Architecture - Distributed logging with AI-powered analytics"
  
  departments:
    tools_refinery:
      name: "Tools Refinery"
      description: "API endpoint management and tools orchestration"
      log_file: "/var/log/psycheville/tools_refinery.jsonl"
      metrics:
        - endpoint_calls
        - response_times
        - error_rates
        - unused_endpoints
        - api_versioning
      thresholds:
        max_response_time_ms: 200
        max_error_rate_percent: 1.0
        unused_endpoint_days: 30
    
    sovereign_ai_lab:
      name: "Sovereign AI Lab"
      description: "LLM training, inference, and AI agent orchestration"
      log_file: "/var/log/psycheville/sovereign_ai_lab.jsonl"
      metrics:
        - model_inference_count
        - training_sessions
        - error_patterns
        - stuck_time
        - token_usage
        - model_latency
      thresholds:
        max_stuck_hours: 2
        max_error_rate_percent: 5.0
        max_inference_latency_ms: 1000
    
    rf_sensor_lab:
      name: "RF Sensor Lab"
      description: "Radio frequency sensor data collection and analysis"
      log_file: "/var/log/psycheville/rf_sensor_lab.jsonl"
      metrics:
        - sensor_readings
        - calibration_events
        - last_active_time
        - data_quality_score
        - signal_to_noise_ratio
      thresholds:
        max_inactive_days: 7
        min_data_quality_score: 0.85
        min_snr_db: 10
    
    quantum_emulation:
      name: "Quantum Emulation Lab"
      description: "Quantum circuit emulation and symbolic analysis"
      log_file: "/var/log/psycheville/quantum_emulation.jsonl"
      metrics:
        - emulation_runs
        - qubit_operations
        - fidelity_scores
        - resource_usage
        - circuit_depth
        - gate_errors
      thresholds:
        min_fidelity: 0.95
        max_gate_error_rate: 0.01
        max_memory_gb: 32
    
    cloud_os:
      name: "Cloud OS Development"
      description: "Container orchestration and cloud infrastructure"
      log_file: "/var/log/psycheville/cloud_os.jsonl"
      metrics:
        - container_starts
        - deployment_events
        - build_times
        - test_coverage
        - resource_utilization
        - uptime_percentage
      thresholds:
        max_build_time_minutes: 10
        min_test_coverage_percent: 80
        target_uptime_percent: 99.9
    
    valoryield_engine:
      name: "Valoryield Engine"
      description: "Revenue optimization and financial analytics"
      log_file: "/var/log/psycheville/valoryield_engine.jsonl"
      metrics:
        - optimization_runs
        - revenue_calculations
        - strategy_evaluations
        - performance_metrics
      thresholds:
        max_calculation_time_ms: 500
        min_optimization_frequency_hours: 1

  reflection_worker:
    enabled: true
    schedule: "0 * * * *"  # Hourly (cron format)
    llm_provider: "ollama"
    llm_model: "llama3:latest"
    llm_temperature: 0.7
    llm_max_tokens: 2000
    # NOTE: Update this path to your Obsidian vault location
    # Example: ${HOME}/Obsidian/PsycheVille or /home/yourusername/Obsidian/PsycheVille
    output_dir: "/home/user/Obsidian/PsycheVille"
    retention_days: 90  # Keep logs for 90 days
    
    reports:
      daily:
        enabled: true
        time: "23:00"  # Generate at 11 PM
        format: "markdown"
      weekly:
        enabled: true
        day: "sunday"
        time: "23:00"
        format: "markdown"
        include_trends: true
      monthly:
        enabled: false
        day: 1
        time: "00:00"
        format: "markdown"
        include_executive_summary: true
    
  analytics:
    daily_report: true
    weekly_synthesis: true
    anomaly_detection: true
    trend_analysis: true
    correlation_analysis: true
    optimization_recommendations: true
    
    anomaly_detection:
      enabled: true
      sensitivity: "medium"  # low, medium, high
      algorithms:
        - statistical_outlier
        - time_series_anomaly
        - pattern_deviation
    
    trend_analysis:
      enabled: true
      lookback_days: 30
      forecast_days: 7
      metrics:
        - event_volume
        - error_rates
        - response_times
        - resource_usage
  
  alerting:
    enabled: true
    channels:
      discord:
        enabled: false
        webhook_url: "${DISCORD_WEBHOOK_URL}"
      slack:
        enabled: false
        webhook_url: "${SLACK_WEBHOOK_URL}"
      email:
        enabled: false
        recipients:
          - "devops@strategickhaos.com"
    
    rules:
      - name: "High Error Rate"
        condition: "error_rate > 5%"
        severity: "critical"
        cooldown_minutes: 30
      
      - name: "Department Inactive"
        condition: "no_events_for_hours > 24"
        severity: "warning"
        cooldown_minutes: 360
      
      - name: "Resource Threshold"
        condition: "cpu_usage > 90% OR memory_usage > 90%"
        severity: "warning"
        cooldown_minutes: 15
      
      - name: "Build Time Exceeded"
        condition: "build_time > threshold"
        severity: "info"
        cooldown_minutes: 60

  logging:
    format: "jsonl"
    timestamp_format: "iso8601"
    compression: "gzip"
    rotation:
      max_size_mb: 100
      max_age_days: 90
      max_files: 10
    
    fields:
      required:
        - timestamp
        - department
        - event_type
      optional:
        - metadata
        - tags
        - user_id
        - session_id
        - trace_id
  
  integrations:
    obsidian:
      enabled: true
      vault_path: "/home/user/Obsidian/PsycheVille"
      daily_notes_folder: "Daily Reports"
      weekly_notes_folder: "Weekly Synthesis"
      dashboard_note: "PsycheVille Dashboard.md"
      templates_folder: "Templates"
    
    prometheus:
      enabled: false
      pushgateway_url: "http://localhost:9091"
      metrics_prefix: "psycheville_"
    
    grafana:
      enabled: false
      dashboard_url: "http://localhost:3000"
      api_key: "${GRAFANA_API_KEY}"

  security:
    log_redaction:
      enabled: true
      patterns:
        - type: "api_key"
          regex: "\\b[A-Za-z0-9]{32,}\\b"
          replacement: "[REDACTED_API_KEY]"
        - type: "email"
          regex: "\\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Z|a-z]{2,}\\b"
          replacement: "[REDACTED_EMAIL]"
        - type: "ip_address"
          regex: "\\b(?:[0-9]{1,3}\\.){3}[0-9]{1,3}\\b"
          replacement: "[REDACTED_IP]"
    
    access_control:
      enabled: false
      require_authentication: false
      allowed_ips: []
      rate_limiting:
        enabled: false
        max_requests_per_minute: 100

  metadata:
    organization: "Strategickhaos DAO LLC"
    project: "Sovereignty Architecture"
    environment: "production"
    version: "1.0.0"
    maintainer: "DevOps Team"
    documentation_url: "https://github.com/Strategickhaos/Sovereignty-Architecture-Elevator-Pitch-"
