org:
  name: "Strategickhaos DAO LLC / Valoryield Engine"
  contact:
    owner: "Domenic Garza"
    slack_or_discord_handle: null   # e.g. "Dom_010101#1234"
  compliance: ["none"]              # soc2, hipaa, iso27001, etc.

discord:
  guild_id: null                    # real guild/server ID here
  channels:
    status: "#cluster-status"
    alerts: "#alerts"
    deployments: "#deployments"
    inference: "#inference-stream"
    agents: "#agents"
    prs: "#prs"
    dev_feed: "#dev-feed"
  bot:
    app_id: null                    # Discord application ID
    token_secret_ref: "vault://kv/discord/bot_token"
    intents:
      message_content: true
      guild_members: false
    rbac:
      prod_role: "ReleaseMgr"
      allow_commands:
        - "/status"
        - "/logs"
        - "/deploy"
        - "/scale"
        - "/review"
      prod_protected_commands:
        - "/deploy"
        - "/scale"
    rate_limits:
      max_msgs_per_min: 30
      burst: 10

infra:
  environments: ["dev", "staging", "prod"]
  control_api:
    base_url: "https://control.internal.strategickhaos"   # placeholder
    auth:
      type: "bearer"
      token_secret_ref: "vault://kv/ctrl/api_token"
    network:
      access: "zerotrust"         # vpn|zerotrust|public
      cidrs_allowed: []           # fill for VPN/IP allowlists
  message_bus:
    type: "redis"                 # redis|nats|kafka|null
    url: "redis://redis.internal.strategickhaos:6379"
    topic_prefix: "ops."
  nodes:
    orchestrator: "kubernetes"    # kubernetes|ecs|nomad|baremetal
    clusters:
      - name: "prod-us"
        api_server: "https://k8s-prod.strategickhaos.internal"
        auth: "oidc"
        namespaces: ["quantum-symbolic","valoryield","agents"]
      - name: "dev"
        api_server: "https://k8s-dev.strategickhaos.internal"
        auth: "oidc"
        namespaces: ["*"]
  logging:
    provider: "loki"              # loki|elk|datadog|splunk
    endpoint: "https://loki.strategickhaos.internal"  # or null
    auth_secret_ref: "vault://kv/observability/loki_auth"
  metrics:
    provider: "prometheus"
    alertmanager_webhook: "https://events.strategickhaos.com/alert"
  tracing:
    provider: "otel"
    collector_endpoint: "http://otel-collector.observability:4317"

ai_agents:
  enabled: true
  model_provider: "openai"          # openai|azure|anthropic|local
  model_name: "gpt-4o-mini"
  routing:
    per_channel:
      "#agents": "gpt-4o-mini"
      "#inference-stream": "none"
  vector_store:
    type: "pgvector"                 # weaviate|qdrant|pgvector|null
    conn_string_secret_ref: "vault://kv/pgvector/conn"
    namespaces:
      - name: "runbooks"
        sources:
          - type: "wiki"
            url: "https://wiki.strategickhaos.internal/runbooks"
          - type: "repo"
            repo: "git@github.com:Strategickhaos-Swarm-Intelligence/runbooks.git"
      - name: "logs-schemas"
        sources:
          - type: "s3"
            bucket: "strategickhaos-observability"
            prefix: "schemas/"

git:
  provider: "github"   # github|gitlab|bitbucket
  org: "Strategickhaos-Swarm-Intelligence"
  app:
    id: null                           # GitHub App ID
    webhook_secret_ref: "vault://kv/git/webhook_secret"
    private_key_secret_ref: "vault://kv/git/app_private_key"
  repos:
    - name: "quantum-symbolic-emulator"
      channel: "#deployments"
      env: "dev"
      post_events:
        - "pull_request"
        - "check_suite"
        - "push"
        - "issue_comment"
    - name: "valoryield-engine"
      channel: "#deployments"
      env: "prod"
      post_events:
        - "pull_request"
        - "check_suite"
        - "push"
    - name: "infra"
      channel: "#deployments"
      env: "prod"
      post_events:
        - "pull_request"
        - "check_suite"
  gitlens:
    edition: "pro"   # or community
    vscode_users_group: "devs"
    features_used:
      - "launchpad"
      - "commit_graph"
      - "pr_management"
    notify_to_discord:
      enabled: true
      channel: "#prs"
      events:
        - "review_started"
        - "review_submitted"
        - "needs_attention"
      cli_token_secret_ref: "vault://kv/discord/bot_token"
  ci:
    system: "github_actions"  # gitlab_ci|jenkins|circleci
    post_status_to_discord: true

event_gateway:
  public_url: "https://events.strategickhaos.com"
  auth:
    hmac:
      key_secret_ref: "vault://kv/events/hmac_key"
      header: "X-Sig"
      algo: "sha256"
  endpoints:
    - path: "/event"
      allowed_services: ["quantum-symbolic","valoryield","agent-*"]
      discord_channel: "#cluster-status"
    - path: "/alert"
      allowed_services: ["alertmanager"]
      discord_channel: "#alerts"
    - path: "/git"
      verify: "github_app"  # uses webhook_secret_ref
      routes:
        - event: "pull_request"
          actions: ["opened","ready_for_review","closed","merged","review_requested"]
          discord_channel: "#prs"
        - event: "check_suite"
          discord_channel: "#deployments"
        - event: "push"
          branches: ["main","release/*"]
          discord_channel: "#deployments"

commands:
  enabled: true
  list:
    - name: "status"
      description: "Service status"
      params:
        - name: "service"
          type: "string"
          required: true
    - name: "logs"
      description: "Tail logs"
      params:
        - name: "service"
          type: "string"
          required: true
        - name: "tail"
          type: "int"
          default: 200
    - name: "deploy"
      description: "Deploy tag to env"
      protected: true
      params:
        - name: "env"
          type: "string"
          enum: ["dev","staging","prod"]
        - name: "tag"
          type: "string"
    - name: "scale"
      description: "Scale service"
      protected: true
      params:
        - name: "service"
          type: "string"
        - name: "replicas"
          type: "int"
    - name: "request"
      description: "Create Refinory architecture request"
      params:
        - name: "project"
          type: "string"
          required: true
        - name: "description"
          type: "string"
          required: true
        - name: "experts"
          type: "string"
          required: false
    - name: "refinory-status"
      description: "Get Refinory request status"
      params:
        - name: "request_id"
          type: "string"
          required: true

security:
  secrets_manager: "vault"  # vault|aws_ssm|gcp_sm|azure_kv
  rotate_days:
    discord_token: 30
    webhook_secret: 90
  redaction:
    patterns:
      - "(?i)api[_-]?key\\s*[:=]\\s*\\S+"
      - "(?i)password\\s*[:=]\\s*\\S+"
      - "Bearer\\s+[A-Za-z0-9._-]+"
  audit_log_sink: "cloudwatch://discord-audit"

governance:
  approvals:
    prod_commands_require: ["ReleaseMgr"]
  change_management:
    link: "https://wiki.strategickhaos.internal/change-management"
  data_handling:
    post_pii_to_discord: false

testing:
  sandbox_guild_id: null
  dry_run: true
  notify_channel: "#agents"

limits:
  discord_api:
    max_messages_per_minute: 30
    max_embed_size_kb: 5
  attachments:
    allow_images: false
    allow_logs_upload: true

# Refinory AI Agent Orchestration Platform
refinory:
  enabled: true
  repo_root: "/workspaces/Sovereignty-Architecture-Elevator-Pitch-"
  services_domain: "refinory.strategickhaos.local"
  network: "strategickhaos_network"
  ports:
    api: 8085
    orchestrator: 8081
    dashboard: 3000
    temporal: 7233
  runtime:
    gpu: false                                # true if you want CUDA containers
    workers: 4
    max_concurrency: 16
  storage:
    artifacts_dir: "/var/refinory/artifacts"
    outputs_dir: "/var/refinory/outputs"
    models_dir: "/var/refinory/models"
  secrets:
    openai_api_key_ref: "vault://kv/openai/api_key"
    github_token_ref: "vault://kv/github/pat"
  integrations:
    postgres_dsn_ref: "vault://kv/postgres/recon_dsn"
    redis_url_ref: "vault://kv/redis/url"
    qdrant_url: "http://qdrant:6333"
    grafana_url: "http://grafana:3000"
    prometheus_url: "http://prometheus:9090"
  git:
    default_org: "Strategickhaos-Swarm-Intelligence"
    default_branch: "main"
    repo_prefix: "ref-"
    auto_create_repo: true
    create_pr: true
  experts:
    team:
      - name: "frontend"
      - name: "backend"
      - name: "devops"
      - name: "security"
      - name: "ai_ml"
      - name: "mobile"
      - name: "blockchain"
      - name: "testing"
      - name: "architecture"
      - name: "data_science"
      - name: "dividend_engine"       # Passive income through dividends
      - name: "ranco_tactical"        # RANCO/PID structured trading
      - name: "risk_management"       # Guardrails and safety
      - name: "portfolio_optimization" # Allocation and rebalancing
    orchestration:
      strategy: "parallel_then_reduce"   # or cascade
      max_rounds: 3
      reducer: "architecture"
  policies:
    allow_external_calls: false
    require_security_review: true
    require_tests: true
    require_containerization: true
    deployment_envs: ["dev","staging"]
  discord:
    announce_channel: "#deployments"
    alerts_channel: "#alerts"
    prs_channel: "#prs"
    notify_events:
      - "request_created"
      - "architecture_ready"
      - "build_passed"
      - "deploy_succeeded"

# =============================================================================
# Hybrid Refinery Financial System Configuration
# Sovereign Income Architecture - This is ARCHITECTURE, not gambling
# =============================================================================
financial_refinery:
  enabled: true
  mode: "hybrid"  # pure_dividend | hybrid | full_ranco | no_trading
  
  # Non-negotiable guardrails
  guardrails:
    # FORBIDDEN - No exceptions ever
    allow_leverage: false
    allow_options: false
    allow_margin: false
    
    # Position limits
    max_single_position_pct: 0.05    # 5% max per position
    max_sector_allocation_pct: 0.20  # 20% max per sector
    
    # Risk controls
    hard_stop_loss_pct: 0.12         # 12% stop loss
    soft_stop_loss_pct: 0.08         # 8% trailing stop
    
    # Cash management
    min_cash_buffer_pct: 0.10        # 10% minimum cash
    max_cash_buffer_pct: 0.20        # 20% maximum cash
    
    # Drawdown limits
    max_portfolio_drawdown_pct: 0.12  # 12% max drawdown
    tactical_risk_cut_threshold: 0.50 # Cut tactical by 50% at drawdown limit
  
  # Dividend Engine Configuration (Base Income Layer)
  dividend_engine:
    enabled: true
    description: "Safe, boring, passive income - like owning a vending machine"
    
    # Portfolio construction
    target_positions: 25
    min_positions: 20
    max_positions: 30
    weighting_method: "risk_weight"  # equal_weight | risk_weight
    
    # Screening criteria
    screening:
      max_payout_ratio: 0.70          # < 70% (REITs: 80%)
      max_payout_ratio_reit: 0.80
      min_dividend_growth_5yr_cagr: 0.03  # > 3% CAGR
      min_interest_coverage: 4.0       # > 4x
      max_net_debt_ebitda: 3.0         # < 3x (REITs: 6x)
      max_net_debt_ebitda_reit: 6.0
      min_roic_premium_over_wacc: 0.02  # ROIC > WACC + 2%
      min_avg_daily_volume_usd: 1000000
    
    # Universe
    universe:
      - "Dividend Achievers (10+ years)"
      - "Dividend Aristocrats (25+ years)"
      - "High-quality REITs"
      - "Regulated Utilities"
    
    # Cash flow allocation
    dividend_allocation:
      reinvest_pct: 0.70              # 70% reinvest
      treasury_pct: 0.23              # 23% to cash buffer
      swarmgate_pct: 0.07             # 7% to SwarmGate
    
    # Rebalancing
    rebalance_frequency: "quarterly"
    rebalance_threshold_pct: 0.05
  
  # Refinery Overlay Configuration (Signals, not gambling)
  refinery_overlay:
    enabled: true
    description: "Algorithms, filters, data processing - machine intelligence"
    
    # Data sources
    data_sources:
      - "price_volume"
      - "atr_14"
      - "moving_averages_20_50_200"
      - "rsi_14"
      - "fundamentals"
    
    # Exclusion rules
    exclusions:
      earnings_window_days: 5         # Â±5 days from earnings
      min_adv_for_signals: 1000000    # $1M ADV minimum
    
    # Signal criteria
    safe_add_criteria:
      near_ma200_pct: 0.05            # Within 5% of 200MA
      require_atr_downtrend: true
      require_fundamentals_intact: true
    
    avoid_criteria:
      payout_stretch_threshold: 0.80
      earnings_revision_down: true
    
    # Output
    watchlists:
      generate_nightly: true
      format: "csv"
      outputs:
        - "dividends_core.csv"
        - "safe_add.csv"
        - "ranco_candidates.csv"
        - "avoid_list.csv"
  
  # RANCO/PID Tactical Sleeve Configuration (Structured Trading)
  ranco_tactical:
    enabled: true
    description: "PID loops, zero-emotion, strict rules - ENGINEERING not speculation"
    
    # Allocation
    max_allocation_pct: 0.20          # 10-20% of capital
    min_allocation_pct: 0.10
    max_open_positions: 5
    
    # Entry rules
    entry_rules:
      require_volatility_compression: true  # ATR% < 6-mo median
      require_ma_alignment: true            # 20 > 50 > 200
      rsi_min: 45
      rsi_max: 65
      require_higher_low: true
      trading_frequency: "weekly"           # NO intraday
    
    # Exit rules
    exit_rules:
      initial_stop_atr_multiplier: 1.5     # 1.5x ATR below entry
      trailing_stop_atr_multiplier: 2.0    # 2x ATR trail
      rsi_overbought_threshold: 75
      exit_on_lower_high_after_overbought: true
    
    # Position sizing
    sizing:
      method: "kelly_fraction"             # kelly_fraction | fixed_risk
      kelly_divisor: 5                     # Kelly / 5
      max_risk_per_trade_pct: 0.01         # 1% max risk
      min_risk_per_trade_pct: 0.005        # 0.5% min risk
    
    # Execution
    execution:
      auto_place_orders: false             # Require human confirmation
      staged_entry_tranches: 3             # Enter in 3 tranches
  
  # Account Structure
  accounts:
    core:
      name: "Core Dividend Account"
      purpose: "Long-term dividend holdings"
      allocation_target: 0.70              # 70% of portfolio
    tactical:
      name: "Tactical RANCO Account"
      purpose: "Structured mechanical trades"
      allocation_target: 0.20              # 20% of portfolio
    treasury:
      name: "Treasury Buffer"
      purpose: "Cash safety buffer"
      allocation_target: 0.10              # 10% of portfolio
  
  # Automation and Rules Engine
  automation:
    enabled: true
    rules:
      - name: "safe_add_staged_buy"
        trigger: "core_name_dips_to_buy_zone"
        action: "place_staged_buys"
        tranches: 3
        requires_confirmation: true
      - name: "ranco_entry_trigger"
        trigger: "ranco_entry_signal"
        action: "place_with_stop"
        requires_confirmation: true
      - name: "drawdown_risk_cut"
        trigger: "portfolio_drawdown_exceeds_12pct"
        action: "cut_tactical_risk_50pct"
        requires_confirmation: false
  
  # Reporting
  reporting:
    weekly_report: true
    metrics:
      - "portfolio_pnl"
      - "dividend_run_rate"
      - "risk_heatmap"
      - "swarmgate_flow_log"
    alerts:
      - "position_concentration"
      - "sector_concentration"
      - "drawdown_warning"
      - "cash_buffer_low"
  
  # Validation and Backtesting
  validation:
    backtest_years: 10
    monte_carlo_simulations: 1000
    scenarios:
      - "dividend_cuts"
      - "recession"
      - "rate_spike"
    alerts:
      drawdown_threshold: 0.12