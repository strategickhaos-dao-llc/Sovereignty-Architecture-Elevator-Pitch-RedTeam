apiVersion: apps/v1
kind: Deployment
metadata:
  name: blue-team-controller
  namespace: blue-team
  labels:
    app.kubernetes.io/name: blue-team-controller
    app.kubernetes.io/component: controller
    app.kubernetes.io/part-of: quantum-chess
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: blue-team-controller
  template:
    metadata:
      labels:
        app.kubernetes.io/name: blue-team-controller
        app.kubernetes.io/component: controller
        app.kubernetes.io/part-of: quantum-chess
        team: blue
    spec:
      containers:
        - name: controller
          image: parrotsec/core:latest
          command: ["/bin/bash", "-c"]
          args:
            - |
              echo "Blue Team Controller starting..."
              apt-get update && apt-get install -y nats-tools python3 python3-pip
              pip3 install nats-py
              
              # Main control loop
              while true; do
                echo "[$(date)] Blue Team Controller active - coordinating defenses"
                sleep 60
              done
          env:
            - name: NATS_URL
              value: "nats://nats.quantum-chess.svc.cluster.local:4222"
            - name: TEAM
              value: "blue"
          resources:
            requests:
              memory: "256Mi"
              cpu: "100m"
            limits:
              memory: "512Mi"
              cpu: "500m"
      restartPolicy: Always
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: firewall-manager
  namespace: blue-team
  labels:
    app.kubernetes.io/name: firewall-manager
    app.kubernetes.io/component: perimeter
    app.kubernetes.io/part-of: quantum-chess
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: firewall-manager
  template:
    metadata:
      labels:
        app.kubernetes.io/name: firewall-manager
        app.kubernetes.io/component: perimeter
        app.kubernetes.io/part-of: quantum-chess
        team: blue
        capability: network-control
    spec:
      containers:
        - name: firewall
          image: parrotsec/core:latest
          command: ["/bin/bash", "-c"]
          args:
            - |
              echo "Firewall Manager Agent starting..."
              while true; do
                echo "[$(date)] Firewall Manager active - monitoring rules"
                sleep 30
              done
          env:
            - name: NATS_URL
              value: "nats://nats.quantum-chess.svc.cluster.local:4222"
            - name: AGENT_TYPE
              value: "firewall-manager"
          resources:
            requests:
              memory: "128Mi"
              cpu: "50m"
            limits:
              memory: "256Mi"
              cpu: "200m"
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ids-ips-controller
  namespace: blue-team
  labels:
    app.kubernetes.io/name: ids-ips-controller
    app.kubernetes.io/component: detection
    app.kubernetes.io/part-of: quantum-chess
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: ids-ips-controller
  template:
    metadata:
      labels:
        app.kubernetes.io/name: ids-ips-controller
        app.kubernetes.io/component: detection
        app.kubernetes.io/part-of: quantum-chess
        team: blue
        capability: intrusion-detection
    spec:
      containers:
        - name: ids
          image: parrotsec/core:latest
          command: ["/bin/bash", "-c"]
          args:
            - |
              echo "IDS/IPS Controller Agent starting..."
              while true; do
                echo "[$(date)] IDS/IPS Controller active - analyzing traffic"
                sleep 30
              done
          env:
            - name: NATS_URL
              value: "nats://nats.quantum-chess.svc.cluster.local:4222"
            - name: AGENT_TYPE
              value: "ids-ips-controller"
          resources:
            requests:
              memory: "256Mi"
              cpu: "100m"
            limits:
              memory: "512Mi"
              cpu: "500m"
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: threat-hunter
  namespace: blue-team
  labels:
    app.kubernetes.io/name: threat-hunter
    app.kubernetes.io/component: proactive
    app.kubernetes.io/part-of: quantum-chess
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: threat-hunter
  template:
    metadata:
      labels:
        app.kubernetes.io/name: threat-hunter
        app.kubernetes.io/component: proactive
        app.kubernetes.io/part-of: quantum-chess
        team: blue
        capability: threat-discovery
    spec:
      containers:
        - name: hunter
          image: parrotsec/core:latest
          command: ["/bin/bash", "-c"]
          args:
            - |
              echo "Threat Hunter Agent starting..."
              while true; do
                echo "[$(date)] Threat Hunter active - searching for IOCs"
                sleep 30
              done
          env:
            - name: NATS_URL
              value: "nats://nats.quantum-chess.svc.cluster.local:4222"
            - name: AGENT_TYPE
              value: "threat-hunter"
          resources:
            requests:
              memory: "256Mi"
              cpu: "100m"
            limits:
              memory: "512Mi"
              cpu: "500m"
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: siem-correlator
  namespace: blue-team
  labels:
    app.kubernetes.io/name: siem-correlator
    app.kubernetes.io/component: analytics
    app.kubernetes.io/part-of: quantum-chess
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: siem-correlator
  template:
    metadata:
      labels:
        app.kubernetes.io/name: siem-correlator
        app.kubernetes.io/component: analytics
        app.kubernetes.io/part-of: quantum-chess
        team: blue
        capability: event-correlation
    spec:
      containers:
        - name: siem
          image: parrotsec/core:latest
          command: ["/bin/bash", "-c"]
          args:
            - |
              echo "SIEM Correlator Agent starting..."
              while true; do
                echo "[$(date)] SIEM Correlator active - correlating events"
                sleep 30
              done
          env:
            - name: NATS_URL
              value: "nats://nats.quantum-chess.svc.cluster.local:4222"
            - name: AGENT_TYPE
              value: "siem-correlator"
          resources:
            requests:
              memory: "512Mi"
              cpu: "200m"
            limits:
              memory: "1Gi"
              cpu: "500m"
