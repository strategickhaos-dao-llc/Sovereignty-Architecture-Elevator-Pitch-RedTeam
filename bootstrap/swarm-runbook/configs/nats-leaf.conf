# =============================================================================
# NATS Leaf Node Configuration
# Sovereign Swarm - Connects to Command-0 hub
# =============================================================================

# Server identification
server_name: "swarm-leaf"

# Listen only on WireGuard interface
# NOTE: Replace with actual node IP (e.g., 10.13.33.2 for fixed1, 10.13.33.3 for mobile2)
listen: "REPLACE_WITH_NODE_IP:4222"

# HTTP monitoring (local only)
http_port: 8222
http: "127.0.0.1:8222"

# Leaf node connection to hub
leafnodes {
    remotes = [
        {
            url: "nats://10.13.33.1:7422"
            
            # Reconnection settings
            connect_retries: -1
            reconnect_wait: "5s"
        }
    ]
}

# Logging
logfile: "/var/log/nats/nats.log"
logtime: true
debug: false
trace: false

# Security settings
max_payload: 1048576
max_pending: 67108864
max_connections: 1000

# JetStream configuration (if needed)
# jetstream {
#     store_dir: "/var/lib/nats/jetstream"
#     max_mem: 256M
#     max_file: 1G
# }

# Authorization (optional - uses SwarmGate tokens)
# authorization {
#     users = [
#         {user: "swarm", password: "$NATS_PASSWORD"}
#     ]
# }
