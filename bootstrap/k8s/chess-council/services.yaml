# Chess Council Services
apiVersion: v1
kind: Service
metadata:
  name: chess-agents
  namespace: chess-council
  labels:
    app: chess-council
    component: agent-service
spec:
  clusterIP: None  # Headless service for StatefulSet
  selector:
    app: chess-council
    component: agent
  ports:
    - name: ssh
      port: 22
      targetPort: 22
    - name: vnc
      port: 5900
      targetPort: 5900
    - name: sunshine
      port: 47989
      targetPort: 47989
    - name: api
      port: 8080
      targetPort: 8080
    - name: metrics
      port: 9090
      targetPort: 9090
---
# Load balancer service for external access
apiVersion: v1
kind: Service
metadata:
  name: chess-council-api
  namespace: chess-council
  labels:
    app: chess-council
    component: api-gateway
  annotations:
    service.beta.kubernetes.io/aws-load-balancer-type: "nlb"
spec:
  type: LoadBalancer
  selector:
    app: chess-council
    component: orchestrator
  ports:
    - name: http
      port: 80
      targetPort: 8080
    - name: https
      port: 443
      targetPort: 8443
---
# Internal service for game orchestrator
apiVersion: v1
kind: Service
metadata:
  name: game-orchestrator
  namespace: chess-council
  labels:
    app: chess-council
    component: orchestrator
spec:
  type: ClusterIP
  selector:
    app: chess-council
    component: orchestrator
  ports:
    - name: http
      port: 8080
      targetPort: 8080
    - name: grpc
      port: 9000
      targetPort: 9000
---
# Stockfish referee service
apiVersion: v1
kind: Service
metadata:
  name: stockfish-referee
  namespace: chess-council
  labels:
    app: chess-council
    component: referee
spec:
  type: ClusterIP
  selector:
    app: chess-council
    component: referee
  ports:
    - name: http
      port: 8081
      targetPort: 8081
---
# Qdrant vector database service
apiVersion: v1
kind: Service
metadata:
  name: qdrant
  namespace: chess-council
  labels:
    app: chess-council
    component: vector-db
spec:
  type: ClusterIP
  selector:
    app: qdrant
  ports:
    - name: http
      port: 6333
      targetPort: 6333
    - name: grpc
      port: 6334
      targetPort: 6334
---
# Ollama LLM service
apiVersion: v1
kind: Service
metadata:
  name: ollama
  namespace: chess-council
  labels:
    app: chess-council
    component: llm
spec:
  type: ClusterIP
  selector:
    app: ollama
  ports:
    - name: http
      port: 11434
      targetPort: 11434
