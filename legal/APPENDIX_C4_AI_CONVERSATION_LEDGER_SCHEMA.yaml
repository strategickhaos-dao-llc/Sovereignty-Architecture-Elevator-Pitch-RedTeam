# Appendix C.4: AI Conversation Ledger Schema v2.0
# Complete YAML schema with GPG signatures, OpenTimestamps, and legal attestation
# Last Updated: 2025-11-21
# Purpose: Legally-defensible documentation of AI-assisted R&D work

# ==============================================================================
# SCHEMA OVERVIEW
# ==============================================================================
# This schema provides a complete framework for documenting AI conversations
# with cryptographic verification, human attestation, and blockchain anchoring
# suitable for:
#   - Patent/IP timeline evidence
#   - Investor due diligence
#   - Academic research documentation
#   - Trade secret protection
#   - R&D audit trails
#   - Regulatory compliance

schema_version: "2.0"
schema_date: "2025-11-21"
legal_framework:
  - "FRE 803(6) - Business Records Exception"
  - "FRE 901(b)(9) - Process or System Evidence"
  - "FRE 902(14) - Certified Data"
  - "eIDAS (EU) - Advanced Electronic Signatures"
  - "ESIGN Act (US) - Electronic Signatures"

# ==============================================================================
# LEDGER METADATA
# ==============================================================================
ledger:
  title: "AI Conversation Research Ledger"
  owner: "Domenic Garza"
  organization: "Strategickhaos DAO LLC"
  purpose: "R&D documentation and audit trail for AI-assisted research"
  domain: "Cybersecurity, Software Architecture, LLM Research"
  inception_date: "2025-11-16"
  
  maintainer:
    name: "Domenic Garza"
    email: "domenic.garza@snhu.edu"
    orcid: "0009-0005-2996-3526"
    gpg_key_id: "0x[YOUR_KEY_ID]"
    gpg_fingerprint: "[YOUR_KEY_FINGERPRINT]"
    
  repository:
    type: "git"
    url: "https://github.com/Strategickhaos/Sovereignty-Architecture-Elevator-Pitch-"
    branch: "main"
    signed_commits: true
    
  legal_basis:
    record_type: "Business Records"
    kept_in_regular_course: true
    contemporaneous_creation: true
    custodian: "Domenic Garza"
    
  disclaimer: |
    This ledger documents AI-assisted research and development work. 
    AI outputs are verified by human review and should not be construed 
    as expert opinions or guaranteed facts. All entries represent work 
    conducted in good faith for legitimate R&D purposes.

# ==============================================================================
# ENTRY TEMPLATE (Copy this for each conversation)
# ==============================================================================
entries:
  
  # ---------------------------------------------------------------------------
  # Example Entry 1: Full Featured Entry
  # ---------------------------------------------------------------------------
  - entry_metadata:
      id: "conv_20251121_001"
      entry_number: 1
      created_at: "2025-11-21T14:31:33Z"
      created_by: "Domenic Garza"
      
    conversation:
      platform: "Claude (Anthropic)"
      model: "claude-3-opus-20240229"
      interface: "Web UI"
      session_id: "session_abc123"
      share_url: "https://claude.ai/share/abc123def456"
      share_url_accessibility: "public"  # or "private", "requires_auth"
      conversation_date: "2025-11-21"
      duration_minutes: 45
      
      topic: "Legal Standards for AI Conversation Logs as Evidence"
      category: "Legal Research"
      tags: ["legal", "evidence", "admissibility", "court", "documentation"]
      
      summary: |
        Discussed current legal landscape for AI conversation logs as court evidence.
        Reviewed case law precedents, Federal Rules of Evidence applicability,
        and best practices for making AI research logs legally defensible.
        Covered GPG signatures, OpenTimestamps, and sworn declaration templates.
        
      key_insights:
        - "AI conversation logs not automatically court-admissible as of Nov 2025"
        - "Best path: human affidavit + screenshots + share URLs + crypto verification"
        - "FRE 803(6) business records and FRE 901(b)(9) process/system are key frameworks"
        - "GPG signatures + git commits + blockchain timestamps provide strong foundation"
        - "Courts accept blockchain timestamps for document age/integrity proof"
        
      decisions_made:
        - "Implement GPG signing for all ledger entries"
        - "Use monthly OpenTimestamps for cost-effective blockchain anchoring"
        - "Create sworn declaration templates for various use cases"
        - "Document verification process for third-party auditors"
        
      action_items:
        - task: "Generate GPG key pair for ledger signing"
          status: "complete"
          completed: "2025-11-21"
        - task: "Create Appendix C legal standards documentation"
          status: "complete"
          completed: "2025-11-21"
        - task: "Set up monthly OpenTimestamps cron job"
          status: "pending"
          due: "2025-11-30"
          
    content_hash:
      algorithm: "SHA3-256"
      hash: "1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef"
      hash_includes: ["entry_metadata", "conversation", "attestation"]
      hash_excludes: ["signatures", "blockchain_anchors", "git_commit"]
      calculated_at: "2025-11-21T14:31:33Z"
      
    chain:
      previous_entry_hash: null  # First entry
      previous_entry_id: null
      chain_position: 1
      chain_verification_url: "https://github.com/Strategickhaos/[...]/commits"
      
    attestation:
      statement: |
        I, Domenic Garza, certify that this entry accurately reflects my 
        conversation with the AI model listed above, accessed via the share 
        URL provided. I have verified the conversation content and created 
        this entry contemporaneously on the date indicated. This entry was 
        made in the regular course of my R&D work.
      verified_by: "Domenic Garza"
      verification_date: "2025-11-21T14:31:33Z"
      verification_method: "Direct access to share URL and manual content review"
      
    cross_validation:
      other_models_consulted: ["GPT-4", "Grok-2"]
      consensus: "High - all models agree on legal framework basics"
      contradictions: []
      independent_verification:
        - source: "Federal Rules of Evidence - Official Text"
          verified: true
          url: "https://www.law.cornell.edu/rules/fre"
        - source: "Case law research via legal databases"
          verified: true
          method: "Westlaw/Lexis search"
          
    signatures:
      gpg:
        signer: "Domenic Garza <domenic.garza@snhu.edu>"
        key_id: "0x1234567890ABCDEF"
        fingerprint: "1234 5678 90AB CDEF 1234 5678 90AB CDEF 1234 5678"
        key_type: "RSA 4096"
        signed_at: "2025-11-21T14:31:33Z"
        signature_file: "conv_20251121_001.yml.asc"
        signature: |
          -----BEGIN PGP SIGNATURE-----
          
          iQIzBAABCAAdFiEEEjMEVYZHiEmJmrs+Kw4MbTtSwDcFAmZGnj0ACgkQKw4MbTtS
          wDdLYQ//dGhpcyBpcyBhbiBleGFtcGxlIHNpZ25hdHVyZSBmb3IgZGVtb25zdHJh
          dGlvbiBwdXJwb3Nlcy4gSW4gcmVhbCB1c2UsIHRoaXMgd291bGQgYmUgYSBmdWxs
          IEdQRyBzaWduYXR1cmUgZ2VuZXJhdGVkIGJ5IHlvdXIgcHJpdmF0ZSBrZXku
          =abcd
          -----END PGP SIGNATURE-----
          
        verification_command: "gpg --verify conv_20251121_001.yml.asc conv_20251121_001.yml"
        public_key_url: "https://github.com/Strategickhaos/[...]/keys/public_key.asc"
        
    blockchain_anchors:
      - type: "opentimestamps"
        protocol_version: "1"
        timestamp_created: "2025-11-21T14:31:33Z"
        timestamp_confirmed: "2025-11-21T15:45:00Z"
        confirmation_status: "confirmed"
        bitcoin_network: "mainnet"
        bitcoin_block: 850123
        bitcoin_block_hash: "00000000000000000003a1b2c3d4e5f6789012345678901234567890abcdef12"
        bitcoin_tx: "def456789012345678901234567890abcdef123456789012345678901234567"
        proof_file: "conv_20251121_001.yml.ots"
        sha256_hash: "a1b2c3d4e5f6789012345678901234567890abcdef123456789012345678901"
        verification_command: "ots verify conv_20251121_001.yml.ots"
        verification_url: "https://opentimestamps.org"
        calendar_servers:
          - "https://alice.btc.calendar.opentimestamps.org"
          - "https://bob.btc.calendar.opentimestamps.org"
        independent_verification: "https://blockstream.info/block/850123"
        
    git_commit:
      repository: "https://github.com/Strategickhaos/Sovereignty-Architecture-Elevator-Pitch-"
      commit_sha: "abc123def456789012345678901234567890abcd"
      commit_message: "Add AI conversation entry: Legal standards for AI evidence"
      author: "Domenic Garza <domenic.garza@snhu.edu>"
      author_date: "2025-11-21T14:31:33Z"
      committer: "Domenic Garza <domenic.garza@snhu.edu>"
      committer_date: "2025-11-21T14:31:33Z"
      signed: true
      signature_status: "verified"
      verification_command: "git log --show-signature abc123def"
      github_url: "https://github.com/Strategickhaos/Sovereignty-Architecture-Elevator-Pitch-/commit/abc123def"
      github_verified_badge: true
      
    legal_metadata:
      record_classification: "Business Record - R&D Documentation"
      retention_requirement: "Permanent - potential patent/IP evidence"
      confidentiality_level: "Internal - Non-Confidential"
      contains_trade_secrets: false
      contains_pii: false
      export_controlled: false
      attorney_client_privilege: false
      work_product_privilege: false
      
    quality_control:
      reviewed_by: "Domenic Garza"
      review_date: "2025-11-21T14:31:33Z"
      accuracy_confidence: "high"
      completeness: "complete"
      share_url_accessible: true
      share_url_checked_date: "2025-11-21T14:31:33Z"
      hallucination_check: "performed"
      hallucination_detected: false
      
  # ---------------------------------------------------------------------------
  # Example Entry 2: Minimal Entry (still legally defensible)
  # ---------------------------------------------------------------------------
  - entry_metadata:
      id: "conv_20251121_002"
      entry_number: 2
      created_at: "2025-11-21T16:00:00Z"
      created_by: "Domenic Garza"
      
    conversation:
      platform: "GPT-4 (OpenAI)"
      model: "gpt-4-turbo-2024-04-09"
      share_url: "https://chat.openai.com/share/xyz789"
      topic: "Docker security best practices"
      summary: "Discussed container isolation, secrets management, and image scanning."
      
    content_hash:
      algorithm: "SHA3-256"
      hash: "abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890"
      
    chain:
      previous_entry_hash: "1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef"
      previous_entry_id: "conv_20251121_001"
      chain_position: 2
      
    attestation:
      statement: "I certify this entry accurately reflects my AI conversation."
      verified_by: "Domenic Garza"
      verification_date: "2025-11-21T16:00:00Z"
      
    signatures:
      gpg:
        signer: "Domenic Garza <domenic.garza@snhu.edu>"
        key_id: "0x1234567890ABCDEF"
        signed_at: "2025-11-21T16:00:00Z"
        signature_file: "conv_20251121_002.yml.asc"
        
    git_commit:
      commit_sha: "def789abc012345678901234567890abcdef1234"
      signed: true
      
  # ---------------------------------------------------------------------------
  # Example Entry 3: Multi-Model Cross-Validation
  # ---------------------------------------------------------------------------
  - entry_metadata:
      id: "conv_20251121_003"
      entry_number: 3
      created_at: "2025-11-21T18:30:00Z"
      created_by: "Domenic Garza"
      
    conversation:
      platform: "Multi-model research session"
      models_used:
        - name: "Claude 3 Opus"
          share_url: "https://claude.ai/share/aaa111"
          role: "Primary research"
        - name: "GPT-4"
          share_url: "https://chat.openai.com/share/bbb222"
          role: "Verification"
        - name: "Grok-2"
          share_url: "https://x.ai/share/ccc333"
          role: "Alternative perspective"
          
      topic: "Kubernetes security architecture for multi-tenant environments"
      
      summary: |
        Cross-validated security architecture recommendations across three AI models.
        All models agreed on core principles (namespace isolation, RBAC, network policies).
        Minor differences in implementation details documented.
        
    cross_validation:
      consensus_level: "high"
      models_in_agreement: 3
      key_agreements:
        - "Namespace isolation is fundamental"
        - "RBAC must follow principle of least privilege"
        - "Network policies should be default-deny"
      differences:
        - model: "Grok-2"
          point: "Suggested more aggressive monitoring than others"
          resolution: "Incorporated as optional enhancement"
          
    content_hash:
      algorithm: "SHA3-256"
      hash: "xyz789012345678901234567890abcdef123456789012345678901234567890"
      
    chain:
      previous_entry_hash: "abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890"
      previous_entry_id: "conv_20251121_002"
      chain_position: 3
      
    attestation:
      statement: "I certify this entry accurately reflects my multi-model AI research session."
      verified_by: "Domenic Garza"
      verification_date: "2025-11-21T18:30:00Z"
      
    signatures:
      gpg:
        signer: "Domenic Garza <domenic.garza@snhu.edu>"
        key_id: "0x1234567890ABCDEF"
        signed_at: "2025-11-21T18:30:00Z"
        signature_file: "conv_20251121_003.yml.asc"
        
    git_commit:
      commit_sha: "ghi345jkl678901234567890abcdef123456789"
      signed: true

# ==============================================================================
# MONTHLY ROOT HASH (Optional - for cost-effective blockchain anchoring)
# ==============================================================================
monthly_summaries:
  - month: "2025-11"
    entries_included: 
      - "conv_20251121_001"
      - "conv_20251121_002"
      - "conv_20251121_003"
    entry_count: 3
    
    root_hash:
      algorithm: "SHA3-256"
      hash: "monthly_root_abc123def456789012345678901234567890abcdef1234567890"
      calculation_method: "SHA3-256 of all entry hashes concatenated"
      calculated_at: "2025-11-30T23:59:59Z"
      calculated_by: "Domenic Garza"
      
    signatures:
      gpg:
        signer: "Domenic Garza <domenic.garza@snhu.edu>"
        key_id: "0x1234567890ABCDEF"
        signed_at: "2025-11-30T23:59:59Z"
        signature_file: "monthly_root_2025-11.txt.asc"
        
    blockchain_anchor:
      type: "opentimestamps"
      bitcoin_block: 851000
      timestamp_confirmed: "2025-12-01T01:30:00Z"
      proof_file: "monthly_root_2025-11.txt.ots"
      
    git_commit:
      commit_sha: "monthly_summary_2025_11_xyz789"
      signed: true

# ==============================================================================
# VERIFICATION PROCEDURES
# ==============================================================================
verification_procedures:
  
  entry_integrity:
    step_1: "Verify GPG signature: gpg --verify entry.yml.asc entry.yml"
    step_2: "Check hash chain: current.previous_hash == previous.content_hash"
    step_3: "Verify git signature: git log --show-signature [commit_sha]"
    step_4: "Verify blockchain timestamp: ots verify entry.yml.ots"
    step_5: "Access share URL and compare content"
    
  full_ledger_integrity:
    step_1: "Verify all entries form unbroken hash chain"
    step_2: "Verify all GPG signatures with public key"
    step_3: "Verify all git commits are signed and sequential"
    step_4: "Check monthly root hashes include all claimed entries"
    step_5: "Verify blockchain timestamps are chronologically consistent"
    
  third_party_audit:
    required_files:
      - "AI conversation ledger YAML file(s)"
      - "GPG signature files (.asc)"
      - "OpenTimestamps proof files (.ots)"
      - "Public GPG key"
      - "Verification instructions document"
    
    audit_steps:
      - "Import public GPG key"
      - "Verify all GPG signatures"
      - "Verify all OpenTimestamps proofs"
      - "Clone git repository and verify signed commits"
      - "Access sample share URLs to verify content"
      - "Validate hash chain integrity"
      - "Review attestation statements"
      - "Assess overall credibility"

# ==============================================================================
# FIELD DEFINITIONS AND REQUIREMENTS
# ==============================================================================
field_requirements:
  
  required_minimum:
    - "entry_metadata.id"
    - "entry_metadata.created_at"
    - "conversation.platform"
    - "conversation.model"
    - "conversation.topic"
    - "content_hash.hash"
    - "chain.previous_entry_hash"
    - "attestation.verified_by"
    - "attestation.verification_date"
    
  strongly_recommended:
    - "conversation.share_url"
    - "conversation.summary"
    - "signatures.gpg"
    - "git_commit.commit_sha"
    - "git_commit.signed"
    
  optional_enhancements:
    - "blockchain_anchors"
    - "cross_validation"
    - "legal_metadata"
    - "quality_control"
    
  formatting_requirements:
    timestamps: "ISO 8601 format (YYYY-MM-DDTHH:MM:SSZ)"
    hashes: "Lowercase hexadecimal"
    urls: "Full HTTPS URLs"
    
# ==============================================================================
# LEGAL COMPLIANCE NOTES
# ==============================================================================
legal_compliance:
  
  business_records_exception_fre_803_6:
    requirement_1: "Records made at or near time of event"
    met_by: "entry_metadata.created_at and attestation.verification_date"
    
    requirement_2: "Made by someone with knowledge"
    met_by: "attestation.verified_by and personal verification statement"
    
    requirement_3: "Kept in regular course of business"
    met_by: "ledger.legal_basis.kept_in_regular_course and systematic process"
    
    requirement_4: "Regular practice to make such records"
    met_by: "Consistent ledger maintenance and process documentation"
    
  authentication_fre_901:
    method_b9_process_or_system:
      requirement: "Evidence of process/system producing accurate result"
      met_by: "Cryptographic verification (GPG, hashes, blockchain, git)"
      
  self_authentication_fre_902_14:
    requirement: "Certified data from electronic system"
    met_by: "GPG signatures + blockchain timestamps + git commits"
    
  electronic_signatures:
    esign_act_us: "GPG signatures have legal effect"
    eidas_eu: "GPG approaches 'advanced electronic signature' level"
    ueta_states: "GPG signatures = handwritten signatures when properly used"

# ==============================================================================
# SCHEMA CHANGE LOG
# ==============================================================================
changelog:
  - version: "2.0"
    date: "2025-11-21"
    changes:
      - "Added GPG signature fields and verification instructions"
      - "Added OpenTimestamps blockchain anchor fields"
      - "Added comprehensive attestation statement template"
      - "Added cross-validation framework for multi-model research"
      - "Added legal metadata and classification fields"
      - "Added quality control and review fields"
      - "Added monthly root hash summary structure"
      - "Added verification procedures section"
      - "Added legal compliance mapping"
    author: "Domenic Garza"
    
  - version: "1.0"
    date: "2025-11-16"
    changes:
      - "Initial schema with basic conversation logging"
      - "Hash chain implementation"
      - "Share URL tracking"
    author: "Domenic Garza"

# ==============================================================================
# DOCUMENT METADATA
# ==============================================================================
document_metadata:
  title: "AI Conversation Ledger Schema v2.0"
  purpose: "Legally-defensible AI research documentation"
  author: "Domenic Garza"
  organization: "Strategickhaos DAO LLC"
  created: "2025-11-21"
  version: "2.0"
  license: "MIT"
  
  legal_disclaimer: |
    This schema provides a framework for documenting AI-assisted research.
    It does not constitute legal advice. Consult qualified legal counsel
    for specific legal questions or high-stakes situations.
    
  attorney_review_recommended_for:
    - "Patent applications"
    - "Litigation"
    - "High-value IP disputes"
    - "Regulatory filings"
    - "Major investment due diligence"
    
  suitable_for:
    - "R&D documentation"
    - "Academic research"
    - "Startup due diligence"
    - "Internal audit trails"
    - "Professional portfolio"
    - "Thesis/dissertation appendices"
